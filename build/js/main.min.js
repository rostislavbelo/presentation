(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";

require("./utils/scroll-lock.js");
var _iosVhFix = require("./utils/ios-vh-fix");
var _initMainNav = require("./modules/init-main-nav");
var _initLoader = require("./modules/init-loader");
var _scrollLockIos = require("./utils/scroll-lock-ios");
var _initAnimateIntro = require("./modules/animation/init-animate-intro.js");
var _initAnimateBatch = require("./modules/animation/init-animate-batch.js");
var _initStickySlider = require("./modules/animation/init-sticky-slider.js");
// ---------------------------------
(0, _scrollLockIos.addScrollLock)();
window.addEventListener('DOMContentLoaded', function () {
  // Utils
  // ---------------------------------

  (0, _iosVhFix.iosVhFix)();

  // Modules
  // ---------------------------------

  window.addEventListener('load', function () {
    (0, _initMainNav.initMainNav)();
    (0, _initAnimateBatch.initAnimateBatch)();
    (0, _initStickySlider.initStickySlider)();
    (0, _initLoader.initLoader)();
    window.addEventListener('loaderOff', function () {
      (0, _initAnimateIntro.initAnimateIntro)();
    });
  });
});

},{"./modules/animation/init-animate-batch.js":2,"./modules/animation/init-animate-intro.js":3,"./modules/animation/init-sticky-slider.js":4,"./modules/init-loader":5,"./modules/init-main-nav":6,"./utils/ios-vh-fix":8,"./utils/scroll-lock-ios":9,"./utils/scroll-lock.js":10}],2:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.initAnimateBatch = void 0;
var initAnimateBatch = function initAnimateBatch() {
  // gsap.set('[data-animate="fade"]', {opacity: 0});
  gsap.set('[data-animate="fade-in"]', {
    opacity: 0,
    y: 25
  });
  gsap.set('[data-animate="fade-scale"]', {
    opacity: 0,
    scale: 0
  });

  // ScrollTrigger.batch('[data-animate="fade"]', {
  //   onEnter: (batch) => gsap.to(batch, {opacity: 1, stagger: {each: 0.25}}),
  //   start: '90% 90%',
  //   end: 'top top',
  //   scrub: true,
  // });

  ScrollTrigger.batch('[data-animate="fade-in"]', {
    onEnter: function onEnter(batch) {
      return gsap.to(batch, {
        opacity: 1,
        y: 0,
        stagger: {
          each: 0.25
        }
      });
    },
    start: '90% 90%',
    end: 'top top',
    scrub: true
  });
  ScrollTrigger.batch('[data-animate="fade-scale"]', {
    onEnter: function onEnter(batch) {
      return gsap.to(batch, {
        opacity: 1,
        scale: 1,
        stagger: {
          each: 0.25
        }
      });
    },
    start: '90% 90%',
    end: 'top top',
    scrub: true
  });
  gsap.set('[data-animate="fade-scale-reverce"]', {
    opacity: 0,
    scale: 0.5
  });
  var setParallax = gsap.timeline({
    paused: true
  });
  setParallax.to('[data-animate="fade-scale-reverce"]', {
    opacity: 1,
    scale: 1
  });
  ScrollTrigger.create({
    trigger: '[data-animate="fade-scale-reverce"]',
    start: 'center bottom',
    end: 'bottom center',
    scrub: true,
    onUpdate: function onUpdate(self) {
      setParallax.progress(self.progress).paused();
    }
  });
};
exports.initAnimateBatch = initAnimateBatch;

},{}],3:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.initAnimateIntro = void 0;
var initAnimateIntro = function initAnimateIntro() {
  var intro = document.querySelector('[data-animate="intro"]');
  if (!intro) {
    return;
  }
  intro.classList.add('is-shown');
  var content = document.querySelector('[data-animate="intro-content"]');
  var animateToScroll = gsap.to(content, {
    opacity: 0.5,
    scale: 0.75,
    y: '-10vh'
  });
  ScrollTrigger.create({
    trigger: intro,
    start: 'top top',
    end: 'bottom top',
    scrub: true,
    animation: animateToScroll
  });
};
exports.initAnimateIntro = initAnimateIntro;

},{}],4:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.initStickySlider = void 0;
var initStickySlider = function initStickySlider() {
  var section = document.querySelector('[data-scroll-slider="parent"]');

  // section.style.minHeight = content.getBoundingClientRect().width + 'px'; // задаем высоту обертке, опираясь на ширину контента

  if (!section) {
    return;
  }
  var content = section.querySelectorAll('[data-scroll-slider="slide"]');
  section.style.minHeight = window.innerWidth * (content.length - 1) + 'px';
  var toggleSlideActive = function toggleSlideActive(progress) {
    var coeffCountSlides = 1 / content.length;
    for (var i = 0; i < content.length; i++) {
      if (progress >= coeffCountSlides * i) {
        section.querySelector('.is-active').classList.remove('is-active');
        content[i].classList.add('is-active');
      }
    }
  };
  ScrollTrigger.create({
    trigger: section,
    start: 'top top',
    end: 'bottom bottom',
    scrub: true,
    onUpdate: function onUpdate(self) {
      toggleSlideActive(self.progress);
    }
  });
};
exports.initStickySlider = initStickySlider;

},{}],5:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.initLoader = void 0;
var initLoader = function initLoader() {
  var loader = document.querySelector('[data-loader]');
  var body = document.querySelector('body');
  if (!loader || !body) {
    return;
  }
  var getEvent = function getEvent() {
    window.dispatchEvent(new Event('loaderOff'));
  };
  var timeline = gsap.timeline();
  timeline.call(function () {
    return loader.classList.add('is-hidden');
  }, null);
  timeline.call(function () {
    return loader.classList.add('animate-hidden');
  }, null, 1);
  timeline.call(function () {
    return body.classList.remove('scroll-lock-ios');
  }, null, 1);
  timeline.call(getEvent, null, 1);
};
exports.initLoader = initLoader;

},{}],6:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.initMainNav = void 0;
var initMainNav = function initMainNav() {
  var page = document.querySelector('html');
  var button = document.querySelector('[data-btn-nav]');
  var header = document.querySelector('[data-header]');
  var mainNav = document.querySelector('[data-main-nav]');
  var body = document.querySelector('body');
  if (!button || !header || !mainNav || !body || !page) {
    return;
  }
  var headerHeight = header.clientHeight;

  // Устанавливаем слежение за высотой хедера и передаём переменную в стили

  document.documentElement.style.setProperty('--header-height', "".concat(headerHeight, "px"));
  window.addEventListener('resize', function () {
    headerHeight = header.clientHeight;
    document.documentElement.style.setProperty('--header-height', "".concat(headerHeight, "px"));
  });

  // -----------------------------------------------------------------

  var toggleActive = function toggleActive() {
    mainNav.addEventListener('click', closeNav);
    header.classList.toggle('is-active');
    mainNav.style['padding-top'] = "".concat(headerHeight, "px");
    if (body.classList.contains('scroll-lock')) {
      window.scrollLock.enableScrolling();
      mainNav.removeEventListener('click', closeNav);
      page.style.scrollBehavior = 'smooth';
      setTimeout(function () {
        header.style.zIndex = '100';
      }, 800);
    } else {
      window.scrollLock.disableScrolling();
      page.style.scrollBehavior = 'unset';
      header.style.zIndex = '102';
    }
  };
  var closeNav = function closeNav(event) {
    if (event.target.classList.contains('main-nav__link')) {
      window.scrollLock.enableScrolling();
      header.classList.remove('is-active');
      setTimeout(function () {
        page.style.scrollBehavior = 'smooth';
      }, 100);
      setTimeout(function () {
        header.style.zIndex = '100';
      }, 800);
    }
    mainNav.removeEventListener('click', closeNav);
  };
  button.addEventListener('click', toggleActive);
};
exports.initMainNav = initMainNav;

},{}],7:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.iosChecker = void 0;
var iosChecker = function iosChecker() {
  return ['iPad Simulator', 'iPhone Simulator', 'iPod Simulator', 'iPad', 'iPhone', 'iPod'].includes(navigator.platform)
  // iPad on iOS 13 detection
  || navigator.userAgent.includes('Mac') && 'ontouchend' in document;
};
exports.iosChecker = iosChecker;

},{}],8:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.iosVhFix = void 0;
var _iosChecker = require("./ios-checker");
var iosVhFix = function iosVhFix() {
  if (!(!!window.MSInputMethodContext && !!document.documentMode)) {
    if ((0, _iosChecker.iosChecker)()) {
      var vh = window.innerHeight * 0.01;
      document.documentElement.style.setProperty('--vh', "".concat(vh, "px"));
      window.addEventListener('resize', function () {
        vh = window.innerHeight * 0.01;
        document.documentElement.style.setProperty('--vh', "".concat(vh, "px"));
      });
    }
  }
};
exports.iosVhFix = iosVhFix;

},{"./ios-checker":7}],9:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.addScrollLock = void 0;
var addScrollLock = function addScrollLock() {
  var body = document.querySelector('body');
  var loader = document.querySelector('[data-loader]');
  if (!body || !loader) {
    return;
  }
  body.classList.add('scroll-lock-ios');
};
exports.addScrollLock = addScrollLock;

},{}],10:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.ScrollLock = void 0;
var _iosChecker = require("./ios-checker");
function _typeof(obj) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && "function" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }, _typeof(obj); }
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }
function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }
function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, "prototype", { writable: false }); return Constructor; }
function _toPropertyKey(arg) { var key = _toPrimitive(arg, "string"); return _typeof(key) === "symbol" ? key : String(key); }
function _toPrimitive(input, hint) { if (_typeof(input) !== "object" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || "default"); if (_typeof(res) !== "object") return res; throw new TypeError("@@toPrimitive must return a primitive value."); } return (hint === "string" ? String : Number)(input); }
var ScrollLock = /*#__PURE__*/function () {
  function ScrollLock() {
    _classCallCheck(this, ScrollLock);
    this._iosChecker = _iosChecker.iosChecker;
    this._lockClass = this._iosChecker() ? 'scroll-lock-ios' : 'scroll-lock';
    this._scrollTop = null;
    this._fixedBlockElements = document.querySelectorAll('[data-fix-block]');
  }
  _createClass(ScrollLock, [{
    key: "_getScrollbarWidth",
    value: function _getScrollbarWidth() {
      return window.innerWidth - document.documentElement.clientWidth;
    }
  }, {
    key: "_getBodyScrollTop",
    value: function _getBodyScrollTop() {
      return self.pageYOffset || document.documentElement && document.documentElement.ScrollTop || document.body && document.body.scrollTop;
    }
  }, {
    key: "disableScrolling",
    value: function disableScrolling() {
      var _this = this;
      this._scrollTop = document.body.dataset.scroll = document.body.dataset.scroll ? document.body.dataset.scroll : this._getBodyScrollTop();
      if (this._getScrollbarWidth()) {
        document.body.style.paddingRight = "".concat(this._getScrollbarWidth(), "px");
        this._fixedBlockElements.forEach(function (block) {
          block.style.paddingRight = "".concat(_this._getScrollbarWidth(), "px");
        });
      }
      document.body.style.top = "-".concat(this._scrollTop, "px");
      document.body.classList.add(this._lockClass);
    }
  }, {
    key: "enableScrolling",
    value: function enableScrolling() {
      document.body.classList.remove(this._lockClass);
      window.scrollTo(0, +document.body.dataset.scroll);
      document.body.style.paddingRight = null;
      document.body.style.top = null;
      this._fixedBlockElements.forEach(function (block) {
        block.style.paddingRight = null;
      });
      document.body.removeAttribute('data-scroll');
      this._scrollTop = null;
    }
  }]);
  return ScrollLock;
}();
exports.ScrollLock = ScrollLock;
window.scrollLock = new ScrollLock();

},{"./ios-checker":7}]},{},[1])


//# sourceMappingURL=main.min.js.map
